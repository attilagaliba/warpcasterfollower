<html prefix="og: https://ogp.me/ns#">
<head>
<title>Test</title>
<meta property="og:title" content="Test" />
  <meta property="og:image" content="https://www.shutterstock.com/shutterstock/photos/159086927/display_1500/stock-photo-black-rowan-berries-on-branches-with-red-leaves-on-an-abstract-background-of-autumn-159086927.jpg" />
  <meta property="fc:frame:image" content="https://www.shutterstock.com/shutterstock/photos/159086927/display_1500/stock-photo-black-rowan-berries-on-branches-with-red-leaves-on-an-abstract-background-of-autumn-159086927.jpg" />
  <meta property="fc:frame" content="vNext" />
  <meta name="fc:frame:button:1" content="Start" />

<script>
function startFollowingList() {
  // localStorage'i sıfırla
  localStorage.removeItem("followingUsernames");
  localStorage.removeItem("followersUsernames");

  var startDiv = document.querySelector(
    ".mt-3.hidden.rounded-lg.px-2.py-3.pt-1\\.5.bg-overlay-light.mdlg\\:block"
  );

  startDiv.innerHTML = `
    <div class="px-2 py-1 text-lg font-semibold">İşlem başladı</div>
    <div class="px-2 py-1 text-sm text-muted">Takipçi Listesi Alınıyor.</div>
`;

  // Following linkini içeren ana divi seç
  const mainDiv = document.querySelector(
    ".sticky.top-0.z-10.flex-col.border-b-0.bg-app.border-default.h-14.sm\\:h-28"
  );

  // Eğer ana div bulunamazsa hata mesajı ver ve kodu durdur
  if (!mainDiv) {
    console.error("Ana div bulunamadı!");
    return;
  }

  // Ana divin içindeki "Following" metnini içeren elementi seç
  const followingElement = mainDiv.querySelector(
    ".flex.flex-col .text-sm.text-muted"
  );

  // Eğer "Following" metni içeren element bulunamazsa hata mesajı ver ve kodu durdur
  if (!followingElement) {
    console.error('"Following" metni içeren element bulunamadı!');
    return;
  }

  // "Following" metnini al
  const followingText = followingElement.innerText.trim();

  // "Following" metninden "@" işaretini çıkararak "kullaniciadi" kısmını al
  const oyazi = followingText
    .replace(/following/i, "")
    .replace(/@/, "")
    .trim();

  // "Following" metnine göre href değerini oluştur
  const hrefValue = `/${oyazi}/following`;

  // Belirli bir sınıfa ve href değerine sahip olan linki bul
  const followLink = document.querySelector(
    `a.flex.h-full.w-full.items-center.justify-center.text-inherit[href="${hrefValue}"]`
  );

  // Eğer link bulunamazsa hata mesajı ver ve kodu durdur
  if (!followLink) {
    console.error("Link bulunamadı!");
    return;
  }

  // Linki tıkla
  followLink.click();

  // 3 saniye bekle
  setTimeout(() => {
    // Kullanıcı adlarını içerecek bir dizi oluştur
    let followingUsernames = [];

    // Her bir kullanıcı adını içeren liste öğesini seç
    document
      .querySelectorAll(".fade-in .text-muted.text-base")
      .forEach((item) => {
        // Kullanıcı adını diziye ekle
        const username = item.innerText.trim();

        // "Following" başlığını içermeyen kullanıcı adlarını al
        if (username !== "Following") {
          followingUsernames.push(username);
        }
      });

    // Kullanıcı adlarını localStorage'e kaydet
    localStorage.setItem(
      "followingUsernames",
      JSON.stringify(followingUsernames)
    );

    // Kullanıcı adlarını konsola yazdır
    console.log("Takip edilen kullanıcılar:", followingUsernames);

    var startDiv = document.querySelector(
      ".mt-3.hidden.rounded-lg.px-2.py-3.pt-1\\.5.bg-overlay-light.mdlg\\:block"
    );

    startDiv.innerHTML =
      `
        <div class="px-2 py-1 text-lg font-semibold">İşlem başladı</div>
        <div class="px-2 py-1 text-sm text-muted">Takip Listesi Alınıyor.</div>
        <div class="px-2 py-1 text-sm text-muted">Takip Listesi Alındı. (` +
      followingUsernames.length +
      `)</div>
    `;

    // Takipçi listesine geçmek için linki bul
    const followersLink = document.querySelector(
      `a.flex.h-full.w-full.items-center.justify-center.text-inherit[href="/${oyazi}/followers"]`
    );

    // Eğer link bulunursa tıkla
    if (followersLink) {
      // Linki tıkladıktan sonra 3 saniye bekle ve startFollowersList fonksiyonunu çağır
      followersLink.click();
      setTimeout(startFollowersList, 3000);
      setTimeout(findUnfollowers, 3000);
      setTimeout(clickFollowing, 3000);
    } else {
      console.error("Takipçi listesine geçmek için link bulunamadı!");
    }
  }, 3000); // 3 saniye beklet
}

function startFollowersList() {
  // Takipçi listesini içerecek bir dizi oluştur
  let followersUsernames = [];

  // Her bir takipçi adını içeren liste öğesini seç
  document
    .querySelectorAll(".fade-in .text-muted.text-base")
    .forEach((item) => {
      // Takipçi adını diziye ekle
      const username = item.innerText.trim();
      followersUsernames.push(username);
    });

  // Takipçi adlarını localStorage'e kaydet
  localStorage.setItem(
    "followersUsernames",
    JSON.stringify(followersUsernames)
  );

  // Takipçi adlarını konsola yazdır
  console.log("Takipçi kullanıcılar:", followersUsernames);

  var startDiv = document.querySelector(
    ".mt-3.hidden.rounded-lg.px-2.py-3.pt-1\\.5.bg-overlay-light.mdlg\\:block"
  );

  startDiv.innerHTML =
    `
    <div class="px-2 py-1 text-lg font-semibold">İşlem devam ediyor</div>
    <div class="px-2 py-1 text-sm text-muted">Takipçi Listesi Alınıyor.</div>
    <div class="px-2 py-1 text-sm text-muted">Takipçi Listesi Alındı. (` +
    followersUsernames.length +
    `)</div>
`;
}

function findUnfollowers() {
  // Takip edilen kullanıcıları localStorage'den al
  const followingUsernames = JSON.parse(
    localStorage.getItem("followingUsernames")
  );

  // Takipçi kullanıcıları localStorage'den al
  const followersUsernames = JSON.parse(
    localStorage.getItem("followersUsernames")
  );

  // Takip edilenler ve takipçiler listeleri alındıktan sonra kontrol edilir
  if (!followingUsernames || !followersUsernames) {
    console.error("Takip edilenler veya takipçiler listesi bulunamadı!");
    return [];
  }

  // Takipçiler arasında olmayan kullanıcıları bul
  const unfollowerList = followingUsernames.filter(
    (username) => !followersUsernames.includes(username)
  );

  // Bulunan unfollower listesini localStorage'e kaydet
  localStorage.setItem("unfollowerList", JSON.stringify(unfollowerList));

  // Bulunan unfollower listesini konsola yazdır
  console.log("Unfollowers:", unfollowerList);

  var startDiv = document.querySelector(
    ".mt-3.hidden.rounded-lg.px-2.py-3.pt-1\\.5.bg-overlay-light.mdlg\\:block"
  );

  startDiv.innerHTML =
    `
    <div class="px-2 py-1 text-lg font-semibold">İşlem devam ediyor</div>
    <div class="px-2 py-1 text-sm text-muted">Takip Etmeyenlar Tespit Ediliyor.</div>
    <div class="px-2 py-1 text-sm text-muted">Takip Etmeyenlar Tespit Edildi. (` +
    unfollowerList.length +
    `)</div>
`;
}

function clickFollowing() {
  const mainDiv = document.querySelector(
    ".sticky.top-0.z-10.flex-col.border-b-0.bg-app.border-default.h-14.sm\\:h-28"
  );
  // Eğer ana div bulunamazsa hata mesajı ver ve kodu durdur
  if (!mainDiv) {
    console.error("Ana div bulunamadı!");
    return;
  }

  if (!mainDiv) {
    console.error("Ana div bulunamadı!");
    return;
  }

  // Ana divin içindeki "Following" metnini içeren elementi seç
  const followingElement = mainDiv.querySelector(
    ".flex.flex-col .text-sm.text-muted"
  );

  // Eğer "Following" metni içeren element bulunamazsa hata mesajı ver ve kodu durdur
  if (!followingElement) {
    console.error('"Following" metni içeren element bulunamadı!');
    return;
  }

  // "Following" metnini al
  const followingText = followingElement.innerText.trim();

  // "Following" metninden "@" işaretini çıkararak "kullaniciadi" kısmını al
  const oyazi = followingText
    .replace(/following/i, "")
    .replace(/@/, "")
    .trim();

  const hrefValue = `/` + oyazi + `/following`;

  // Takip edilen kullanıcıları görmek için takip edilenler sayfasına git
  const followingLink = document.querySelector(
    `a.flex.h-full.w-full.items-center.justify-center.text-inherit[href="${hrefValue}"]`
  );

  var startDiv = document.querySelector(
    ".mt-3.hidden.rounded-lg.px-2.py-3.pt-1\\.5.bg-overlay-light.mdlg\\:block"
  );

  startDiv.innerHTML = `
    <div class="px-2 py-1 text-lg font-semibold">İşlem devam ediyor</div>
    <div class="px-2 py-1 text-sm text-muted">Takip Etmeyenler Listesi Hazırlanıyor.</div>
`;

  if (followingLink) {
    followingLink.click();
  } else {
    console.error("Takip edilenler sayfasına gitmek için link bulunamadı!");
    return;
  }

  setTimeout(removeLegitFollowing, 3000);
}

function removeLegitFollowing() {
  // Tüm liste öğelerini seç
  const parentDiv = document.querySelector(".h-full.w-full"); // h-full ve w-full class'larına sahip div'i seç

  if (parentDiv) {
    const fadeDiv = parentDiv.querySelector(".fade-in"); // parentDiv içindeki fade-in class'ına sahip div'i seç

    if (fadeDiv) {
      // fade-in class'ına sahip div'in içeriğini temizle
      fadeDiv.innerHTML = "";

      // Yeni bir liste oluştur
      const newList = document.createElement("ul");
      newList.classList.add("my-list"); // İsteğe bağlı olarak yeni listenin class'ını ayarlayabilirsiniz
      newList.style.textAlign = "center"; // Liste içeriğini merkezlemek için CSS
      var startDiv = document.querySelector(
        ".mt-3.hidden.rounded-lg.px-2.py-3.pt-1\\.5.bg-overlay-light.mdlg\\:block"
      );

      startDiv.innerHTML = `
        <div class="px-2 py-1 text-lg font-semibold">İşlem Bitti.</div>
        <div class="px-2 py-1 text-sm text-muted">Takip Etmeyenlar Listesi Hazır.</div>
    `;
      // unfollowerList'ten gelen veriyi al ve liste içine ekle
      const unfollowerList = JSON.parse(localStorage.getItem("unfollowerList"));
      if (unfollowerList && unfollowerList.length > 0) {
        unfollowerList.forEach((item, index) => {
          if (index !== 0) {
            // İlk elemanı atla
            const listItem = document.createElement("li");
            listItem.textContent = item;
            newList.appendChild(listItem);

            const link = document.createElement("a");
            link.textContent = item;
            link.href = "/" + item.substring(1); // item içindeki @ işaretini kaldırarak link oluştur
            link.target = "_blank"; // Yeni sekmede açmak için
            listItem.appendChild(link);
            newList.appendChild(listItem);
          }
        });
      } else {
        const listItem = document.createElement("li");
        listItem.textContent = "Henüz unfollow edenler bulunmamaktadır.";
        newList.appendChild(listItem);
      }

      // Yeni oluşturulan listeyi fadeDiv'e ekleyin
      fadeDiv.appendChild(newList);
    } else {
      console.log("fade-in class'ına sahip bir div bulunamadı.");
    }
  } else {
    console.log("h-full ve w-full class'larına sahip bir div bulunamadı.");
  }

  // Gerekli HTML parçalarını seçmek için querySelector kullanarak elementleri seçiyoruz
  const followingLink = document.querySelector(
    'a[class="current flex h-full w-full items-center justify-center text-inherit"]'
  );
  // "Following" başlığını içeren elementi seçiyoruz
  const followingTitle = followingLink.querySelector(".text-default");

  // Eğer "Following" başlığı varsa, onu "SA" ile değiştiriyoruz
  if (followingTitle) {
    followingTitle.textContent = "NON-FOLLOWERS";
  } else {
    console.log("Belirtilen başlık bulunamadı.");
  }

}

  
</script>

</head>

<body>
    <button onclick="startFollowingList()">Start</button>
</body>

</html>
